---
import { Icon } from "astro-icon/components"
import { openMenuId, closeMenuId, mobileMenuContentId } from "./menu-ids"
---

<button aria-label="Open menu" id={openMenuId}>
    <Icon name="menu" size={30} />
</button>

<button class="hidden" aria-label="Open menu" id={closeMenuId}>
    <Icon name="close" size={30} />
</button>

<script is:inline define:vars={{ openMenuId, closeMenuId, mobileMenuContentId }}>
    const initializeMenuActions = () => {
        const openMenuButton = document.getElementById(openMenuId)
        const closeMenuButton = document.getElementById(closeMenuId)
        const menuContentButton = document.getElementById(mobileMenuContentId)

        openMenuButton?.addEventListener("click", () => {
            openMenuButton?.classList.toggle("hidden")
            closeMenuButton?.classList.toggle("hidden")
            menuContentButton?.classList.toggle("active")
        })

        closeMenuButton?.addEventListener("click", () => {
            closeMenuButton?.classList.toggle("hidden")
            openMenuButton?.classList.toggle("hidden")
            menuContentButton?.classList.toggle("active")
        })
    }

    // NOTE: needed when View Transition is enabled, otherwise it will attach event listeners once and not when changing route
    document.addEventListener("astro:page-load", initializeMenuActions)
</script>
